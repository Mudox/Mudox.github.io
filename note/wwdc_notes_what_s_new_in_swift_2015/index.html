<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>

    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title> WWDC NOTES - WHAT&#39;S NEW IN SWIFT (2015) &middot; Mudox </title>

    
    <link rel="stylesheet" href="/lib/normalize/normalize.css">
    <link rel="stylesheet" href="/lib/mudox_hyde.css">

    
    
    <link rel="stylesheet" href="/lib/fonts/fonts.css">

    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/lib/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/lib/favicon.ico">

    
    <link href="" rel="alternate" type="application/rss+xml" title="Mudox" />

    
    <script src="/lib/jquery/jquery.min.js"></script>

    
    
    
    <link rel="stylesheet" href="/lib/highlight/styles/tomorrow.css">
    <script src="/lib/highlight/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
    <script src="/lib/tagcanvas/jquery.tagcanvas.min.js"></script>

    
    <script src="/lib/particles/particles.js"></script>

    
    
    

    
    <link rel="stylesheet" href="/lib/animate/animate.min.css">

  </head>

<body class="theme-base-blue">

    <div class="sidebar">

  
  <div id="particles-js"> </div>

  
  <div id="sidebar-front-content" class="container">

    <nav id=sidebar-menu>
      
      <li class="top-menu-item">
        <a href="http://mudox.github.io/note/">NOTES</a>
      </li>
      <li class="top-menu-item">
        <a href="http://mudox.github.io/memo/">MEMOS</a>
      </li>
      <li class="top-menu-item">
        <a href="http://mudox.github.io/project/">PROJECTS</a>
      </li>
      <li class="top-menu-item">
        <a href="http://mudox.github.io/post/">POSTS</a>
      </li>
    </nav>

    <nav id="cloud-container">
      <canvas id="cloud-canvas" width="300" height="300" style="width: 100%;">
        
        <a href="/languages">languages</a> 
        <a href="/languages/bash">bash</a> 
        <a href="/languages/c">c</a> 
        <a href="/languages/chinese">chinese</a> 
        <a href="/languages/css">css</a> 
        <a href="/languages/english">english</a> 
        <a href="/languages/go">go</a> 
        <a href="/languages/html">html</a> 
        <a href="/languages/javascript">javascript</a> 
        <a href="/languages/lua">lua</a> 
        <a href="/languages/objc">objc</a> 
        <a href="/languages/oc">oc</a> 
        <a href="/languages/python">python</a> 
        <a href="/languages/ruby">ruby</a> 
        <a href="/languages/swift">swift</a> 
        <a href="/languages/viml">viml</a>  
        <a href="/platforms">platforms</a> 
        <a href="/platforms/arch">arch</a> 
        <a href="/platforms/ios">ios</a> 
        <a href="/platforms/linux">linux</a> 
        <a href="/platforms/macos">macos</a> 
        <a href="/platforms/web">web</a> 
        <a href="/platforms/win">win</a>  
        <a href="/series">series</a> 
        <a href="/series/awesome-list">awesome-list</a> 
        <a href="/series/error">error</a> 
        <a href="/series/setup">setup</a>  
        <a href="/tags">tags</a> 
        <a href="/tags/appdev">appdev</a> 
        <a href="/tags/awesome">awesome</a> 
        <a href="/tags/bash">bash</a> 
        <a href="/tags/cocoa">cocoa</a> 
        <a href="/tags/concurrency">concurrency</a> 
        <a href="/tags/dev">dev</a> 
        <a href="/tags/git">git</a> 
        <a href="/tags/libraries">libraries</a> 
        <a href="/tags/me">me</a> 
        <a href="/tags/networking">networking</a> 
        <a href="/tags/setup">setup</a> 
        <a href="/tags/shell">shell</a> 
        <a href="/tags/system">system</a> 
        <a href="/tags/tool">tool</a> 
        <a href="/tags/translation">translation</a> 
        <a href="/tags/unicode">unicode</a> 
        <a href="/tags/vim">vim</a> 
        <a href="/tags/vocabulary">vocabulary</a> 
        <a href="/tags/xcode">xcode</a> 
        <a href="/tags/zsh">zsh</a>  
      </canvas>
    </nav>

    <div class="sidebar-about sidebar-sticky">
      <div id="logo"><a href="/" id="Mudox" class="animated bounceInLeft">Mudox</a>
      </div>
      <p class="lead">
        My site powered by <a href="http://gohugo.io">Hugo</a> with a theme customized from <a href="https://github.com/spf13/hyde.git">hyde</a>.
      </p>
      <p>&copy; 2015. All rights reserved. </p>
    </div>

  </div>

</div>


    <div class="content container">
        <div class="post">
            
            <h1>WWDC NOTES - WHAT&#39;S NEW IN SWIFT (2015)</h1>
            <span class="post-date">Fri, Jun 12, 2015</span>

            
            <div id="toc">
                <nav id="TableOfContents">
<ul>
<li><a href="#fundamentals:e190607d4f7a6a5e97b66be1e3f38a13">Fundamentals</a>
<ul>
<li><a href="#print-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Print <code>enum</code>s</a></li>
<li><a href="#associated-values-in-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Associated Values in <code>enum</code>s</a></li>
<li><a href="#recursive-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Recursive <code>enum</code>s</a></li>
<li><a href="#do-statement:e190607d4f7a6a5e97b66be1e3f38a13"><code>do</code> Statement</a></li>
<li><a href="#options-sets:e190607d4f7a6a5e97b66be1e3f38a13">Options Sets</a></li>
<li><a href="#functions-and-methods:e190607d4f7a6a5e97b66be1e3f38a13">Functions and Methods</a></li>
<li><a href="#diagnostic:e190607d4f7a6a5e97b66be1e3f38a13">Diagnostic</a></li>
<li><a href="#sdk-improvements:e190607d4f7a6a5e97b66be1e3f38a13">SDK Improvements</a></li>
<li><a href="#unit-testing-and-access-control:e190607d4f7a6a5e97b66be1e3f38a13">Unit Testing and Access Control</a></li>
<li><a href="#rich-comments:e190607d4f7a6a5e97b66be1e3f38a13">Rich Comments</a></li>
<li><a href="#other-features:e190607d4f7a6a5e97b66be1e3f38a13">Other Features</a></li>
</ul></li>
<li><a href="#pattern-matching:e190607d4f7a6a5e97b66be1e3f38a13">Pattern Matching</a>
<ul>
<li><a href="#guard-statement-for-early-exit:e190607d4f7a6a5e97b66be1e3f38a13"><code>guard</code> Statement for Early Exit</a></li>
<li><a href="#case-uniformly-supported-in-control-flow-statements:e190607d4f7a6a5e97b66be1e3f38a13"><code>case</code> Uniformly Supported in Control Flow Statements</a></li>
<li><a href="#for-in-filtering:e190607d4f7a6a5e97b66be1e3f38a13"><code>for ... in</code> Filtering</a></li>
</ul></li>
<li><a href="#api-availability-checking:e190607d4f7a6a5e97b66be1e3f38a13">API Availability Checking</a></li>
<li><a href="#protocol-extensions:e190607d4f7a6a5e97b66be1e3f38a13">Protocol Extensions</a></li>
<li><a href="#error-handling:e190607d4f7a6a5e97b66be1e3f38a13">Error Handling</a>
<ul>
<li><a href="#3-new-keywords-and-1-statements:e190607d4f7a6a5e97b66be1e3f38a13">3 New Keywords and 1 statements</a></li>
<li><a href="#errortype-protocol:e190607d4f7a6a5e97b66be1e3f38a13"><code>ErrorType</code> protocol</a></li>
<li><a href="#enum-is-great-for-groups-of-related-errors:e190607d4f7a6a5e97b66be1e3f38a13"><code>enum</code> is Great for Groups of Related Errors</a></li>
<li><a href="#defer-actions:e190607d4f7a6a5e97b66be1e3f38a13"><code>defer</code> actions</a></li>
</ul></li>
</ul>
</nav>
            </div>

            
            

<p>NOTES for What&rsquo;S New in Swift (2015) from WWDC15.</p>

<h1 id="fundamentals:e190607d4f7a6a5e97b66be1e3f38a13">Fundamentals</h1>

<hr />

<h2 id="print-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Print <code>enum</code>s</h2>

<pre><code class="language-swift">enum Animals {
    case Dog, Cat, Troll, Dragon
}

let a = Animals.Dragon
print(a) // get 'Animals.Dragon' instead of frustrating '(Enum Value)'
</code></pre>

<h2 id="associated-values-in-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Associated Values in <code>enum</code>s</h2>

<pre><code class="language-swift">// a stronger version of C union
enum Either&lt;T1, T2&gt; {
  case First(T1)
  case Second(T2)
}
</code></pre>

<h2 id="recursive-enum-s:e190607d4f7a6a5e97b66be1e3f38a13">Recursive <code>enum</code>s</h2>

<pre><code class="language-swift">enum Tree(T) {
  case Leaf(T)
  indirect case Node(Tree, Tree)
}
</code></pre>

<h2 id="do-statement:e190607d4f7a6a5e97b66be1e3f38a13"><code>do</code> Statement</h2>

<pre><code class="language-swift">do {
    // new containing scope
} catch ... {

// for `do-while` in other languages, use `repeat` to avoid ambiguity
repeat {
    // repeating code lines
} while ...
</code></pre>

<h2 id="options-sets:e190607d4f7a6a5e97b66be1e3f38a13">Options Sets</h2>

<pre><code class="language-swift">// before swift 2.0
viewAnimationOpetions = .Repeat | .CurveEaseIn | .TransitionCurlUp
viewAnimationOpetions = nil
if viewAnimationOpetions &amp; .TransitionCurlUp != nil {

// in swift 2.0
viewAnimationOpetions = [.Repeat, .CurveEaseIn, .TransitionCurlUp]
viewAnimationOpetions = []
if viewAnimationOpetions.contains(.TransitionCurlUp) {

// new way of defining OptionSetType derived option types
struct MyFontStyle : OptionSetType {
    let rawValue: Int
    static let Bold          = MyFontStyle(rawValue: 1)
    static let Italic        = MyFontStyle(rawValue: 2)
    static let Underline     = MyFontStyle(rawValue: 4)
    static let Strikethrough = MyFontStyle(rawValue: 8)
}

myFont.style = []
myFont.style = [.Underline]
myFont.style = [.Bold, .Italic]

if myFont.style.contains(.Strikethrough) {
</code></pre>

<h2 id="functions-and-methods:e190607d4f7a6a5e97b66be1e3f38a13">Functions and Methods</h2>

<p>all <code>func</code> declarations are uniform:</p>

<ul>
<li><p>First argument is implied by the base function name</p></li>

<li><p>Labels are used for subsequent arguments</p></li>

<li><p>No special rules for defaulted parameters</p></li>

<li><p><code>#</code> argument syntax has been removed</p></li>
</ul>

<h2 id="diagnostic:e190607d4f7a6a5e97b66be1e3f38a13">Diagnostic</h2>

<ul>
<li><p>New fix-it helps you add <code>mutating</code> ahead of mutating methods</p></li>

<li><p>New Warnings</p>

<ul>
<li><p><code>var</code> defined variable never mutated</p></li>

<li><p><code>let</code> defined constant never used</p></li>

<li><p>unused <code>sort()</code> result, use in-place version <code>sortInPlace()</code></p></li>
</ul></li>
</ul>

<h2 id="sdk-improvements:e190607d4f7a6a5e97b66be1e3f38a13">SDK Improvements</h2>

<p>Adoption of new features and best practices:</p>

<ul>
<li><p>Nullability qualifiers</p></li>

<li><p>Objective-C typed collections</p></li>

<li><p><code>NS_ENUM</code>, <code>NS_OPTIONS</code>, instancetype, @property, etc</p></li>
</ul>

<p>see sessions:</p>

<ol>
<li><p><strong>Swift and Objective-C Interoperability</strong> (2015)</p></li>

<li><p><strong>What&rsquo;s New in Cocoa</strong> (2015)</p></li>
</ol>

<p>for more details</p>

<h2 id="unit-testing-and-access-control:e190607d4f7a6a5e97b66be1e3f38a13">Unit Testing and Access Control</h2>

<p>see sessions:</p>

<ol>
<li><p><strong>What&rsquo;s New in Xcode</strong> (2015)</p></li>

<li><p><strong>UI Testing in Xcode</strong> (2015)</p></li>
</ol>

<p>for more details</p>

<h2 id="rich-comments:e190607d4f7a6a5e97b66be1e3f38a13">Rich Comments</h2>

<p>see sessions:</p>

<ol>
<li><strong>Authoring Rich Playgrounds</strong> (2015)</li>
</ol>

<p>for more details</p>

<h2 id="other-features:e190607d4f7a6a5e97b66be1e3f38a13">Other Features</h2>

<ul>
<li><p>Default implementations in protocols</p></li>

<li><p>C function pointers + closures</p></li>

<li><p>Recursive nested functions</p></li>

<li><p><code>if</code>/<code>do</code> labeled break</p></li>

<li><p>SIMD Vectors</p></li>

<li><p>Mirrors API</p></li>

<li><p><code>readline()</code></p></li>

<li><p><code>@nonobjc</code></p></li>
</ul>

<p>see sessions:</p>

<ol>
<li><p><strong>The Swift Programming Language</strong> (Swift 2.0)</p></li>

<li><p><strong>Xcode 7 release notes</strong></p></li>
</ol>

<p>for more details</p>

<h1 id="pattern-matching:e190607d4f7a6a5e97b66be1e3f38a13">Pattern Matching</h1>

<hr />

<h2 id="guard-statement-for-early-exit:e190607d4f7a6a5e97b66be1e3f38a13"><code>guard</code> Statement for Early Exit</h2>

<pre><code class="language-swift">guard let ...
      let ... else {
}
</code></pre>

<blockquote>
<p>Any variables or constants that were assigned values using an optional
binding as part of the condition are available for the rest of the code block
that the guard statement appears in.</p>

<p>The <code>else</code> branch must transfer control to exit the code block that that
guard statement appears in. It can do this with a control transfer statement
such as <code>return</code>, <code>break</code>, or <code>continue</code>, or it can call a function or method that
dosen&rsquo;t return, such as <code>fatalError()</code>.</p>
</blockquote>

<h2 id="case-uniformly-supported-in-control-flow-statements:e190607d4f7a6a5e97b66be1e3f38a13"><code>case</code> Uniformly Supported in Control Flow Statements</h2>

<pre><code>```swift
// switch with only one case you want to handle

// before swift 2.0
switch bar() {
case .MyEnumCase(let value) where value != 42:
    doThing(value)
default: break
}

// in swift 2.0
if case .MyEnumCase(let value) = bar() where value != 42 {
    doThing(value)
}
```

for now there are 4 kind of case statements

1. switch case

1. while case

1. if case

1. guard case

1. for-in case
</code></pre>

<h2 id="for-in-filtering:e190607d4f7a6a5e97b66be1e3f38a13"><code>for ... in</code> Filtering</h2>

<pre><code>```swift
// before swift 2.0
for value in mySequence {
  if value != &quot;&quot; {
    doThing(value)
  }
}

// in swift 2.0
for value in mySequence where value != &quot;&quot; {
  doThing(value)
}
```
</code></pre>

<h1 id="api-availability-checking:e190607d4f7a6a5e97b66be1e3f38a13">API Availability Checking</h1>

<hr />

<pre><code class="language-swift">if|guard #available({platform name} {version}, ..., *) {
  // statements to execute if the APIs are available
} else {
  // fallback statements to execute if the APIs are unavailable
}
</code></pre>

<h1 id="protocol-extensions:e190607d4f7a6a5e97b66be1e3f38a13">Protocol Extensions</h1>

<hr />

<pre><code class="language-swift">extension Array {

}
</code></pre>

<p>see sessions:</p>

<ol>
<li><strong>Protocol Oriented Programming in Swift</strong> (2015)</li>
</ol>

<p>for more details</p>

<h1 id="error-handling:e190607d4f7a6a5e97b66be1e3f38a13">Error Handling</h1>

<hr />

<h2 id="3-new-keywords-and-1-statements:e190607d4f7a6a5e97b66be1e3f38a13">3 New Keywords and 1 statements</h2>

<ol>
<li><p>Fail-able functions <code>throw</code> errors instead of pass out <code>inout error: NSError?</code> (or <code>NSErrorPointer</code>)</p></li>

<li><p>Use <code>try</code> to mark &amp; invoke throw-able functions</p></li>

<li><p>Use <code>try!</code> to assert that fail-able function must not fail.</p></li>

<li><p>Use <code>do {...} catch ... {}</code> construct to try &amp; catch errors</p></li>
</ol>

<pre><code class="language-swift">func mayFail() throw {
  ...
  throw {throw-able object}
  ...
}

// mark &amp; invoke a failable function
try mayFail()

// throwing out an error is just like assertion failed
try! mayFail()

// do {
  try mayFail()
} catch ErrorEnum.ErrorType {
  // catch pattern matching
} catch let error {
  // catching &amp; binding
} catch {
  // catch everything
}
</code></pre>

<h2 id="errortype-protocol:e190607d4f7a6a5e97b66be1e3f38a13"><code>ErrorType</code> protocol</h2>

<p>Any type that conforms to <code>ErrorType</code> can be thrown and caught</p>

<ul>
<li><p><code>NSError</code> already conforms to <code>ErrorType</code></p></li>

<li><p>Can make your own types conform as well</p></li>
</ul>

<h2 id="enum-is-great-for-groups-of-related-errors:e190607d4f7a6a5e97b66be1e3f38a13"><code>enum</code> is Great for Groups of Related Errors</h2>

<ul>
<li><p>Can carry data in a payload</p></li>

<li><p>Compiler handles protocol conformance details automatically</p></li>
</ul>

<pre><code class="language-swift">enum DataError : ErrorType {
case MissingName
case MissingYear
// add more later
}

func processSale(json: AnyObject) throws {
guard let buyerJSON = json[&quot;buyer&quot;] as? NSDictionary {
  throw DataError.MissingBuyer
}
let buyer = try processPerson(buyerJSON)

guard let price = json[&quot;price&quot;] as? Int {
  throw DataError.MissingPrice
}

return Sale(buyer, price)
}
</code></pre>

<h2 id="defer-actions:e190607d4f7a6a5e97b66be1e3f38a13"><code>defer</code> actions</h2>

<p>simlilar to the <code>defer</code> keywords in Go language.</p>

<pre><code class="language-swift">func processSale(json: AnyObject) throws {
  delegate?.didBeginReadingSale()
  defer { delegate?.didEndReadingSale() }

  guard let buyerJSON = json[&quot;buyer&quot;] as? NSDictionary {
    throw DataError.MissingBuyer
  }
  let buyer = try processPerson(buyerJSON)

  guard let price = json[&quot;price&quot;] as? Int {
    throw DataError.MissingPrice
  }

  return Sale(buyer, price)
}
</code></pre>

        </div>
    </div>

        
    <script src="/lib/mudox.js"></script>
</body>
</html>

